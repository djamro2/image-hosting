<!DOCTYPE html>
<html lang="en" ng-app="ImageHosting">
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="/styles/styles.css">
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0-rc5/angular-material.min.css">

    <script type="text/javascript" src="/scripts/angular.min.js"></script>
    <script type="text/javascript" src="/scripts/angular-resource.min.js"></script>
    <script type="text/javascript" src="/scripts/angular-route.min.js"></script>
    <script type="text/javascript" src="/scripts/angular-messages.min.js"></script>
    <script type="text/javascript" src="/scripts/angular-aria.min.js"></script>
    <script type="text/javascript" src="/scripts/angular-animate.min.js"></script>

    <script type="text/javascript" src="/scripts/ng-file-upload-shim.min.js"></script>
    <script type="text/javascript" src="/scripts/ng-file-upload.min.js"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0-rc7/angular-material.min.js"></script>

    <script type="text/javascript" src="/app/services/ImageService.js"></script>
    <script type="text/javascript" src="/app/controllers/HomeCtrl.js"></script>
    <script type="text/javascript" src="/app/directives/buttonAsInput.js"></script>
    <script type="text/javascript" src="/app/app.js"></script>

    <title>Image Hosting</title>
</head>

<body ng-controller="HomeController">

    <div layout="column" layout-align="center center" class="upload-wrapper" ng-cloak>

        <md-toolbar class="md-whiteframe-1dp toolbar-header">
            <div class="md-toolbar-tools">
                <h2 class="md-flex upload-heading">Image Hosting</h2>
            </div>
        </md-toolbar>

        <md-toolbar class="md-accent md-whiteframe-1dp upload-heading">
            <div class="md-toolbar-tools">
                <h2 class="md-flex upload-heading">Upload Image</h2>
            </div>
        </md-toolbar>

        <md-content layout-align="center center" layout-padding class="md-whiteframe-8dp component-content">

            <div layout="column" class="component-wrapper">

                <form name="uploadForm">

                <fieldset>

                <p class="uploadedBy">Uploading as <span>anonymous</span></p>

                <md-input-container>
                    <label>Title (optional)</label>
                    <input name="title" ng-model="image.title">
                </md-input-container>

                <div class="input-file-row" layout="row" layout-align="start center" button-as-input>
                    <input type="file" id="hiddenFileInput" name="file" ngf-select ng-model="image.file" ng-change="updateImageInfo(image.file)" size="31" required>
                    <md-button  id="chooseFileButton" class="md-raised choose-file-button">Choose File</md-button>
                    <span class="file-name">{{fileName}}</span>
                </div>

                <md-checkbox class="md-primary checkbox-nsfw" name="nsfw" ng-model="image.nsfw" aria-label="Checkbox is nfsw?">
                    NSFW?
                </md-checkbox>

                <md-checkbox class="md-primary checkbox-agree" name="isPolicyAgreed" ng-model="image.agree" aria-label="Checkbox doesn't violate policy">
                    Agree that this doesn't violate our <a href="#">policy</a>
                </md-checkbox>

                <div layout="row" layout-align="center center">
                    <md-button id="uploadButton" class="md-raised md-primary" ng-click="uploadImage(image.file)">Upload</md-button>
                </div>

                <div layout="row" layout-align="center center">
                    <p ng-if="errorMessage && !successMessage" class="bottom-message red">{{errorMessage}}</p>
                    <p ng-if="successMessage && !errorMessage" class="bottom-message blue">{{successMessage}}</p>
                </div>

                </fieldset>

                </form>

            </div>
        </md-content>

    </div>

    <div layout="column" layout-align="center center" class="recent-pic-wrapper" ng-cloak>

        <md-toolbar class="md-accent md-whiteframe-1dp">
            <div class="md-toolbar-tools">
                <h2 class="md-flex upload-heading">Recent Images</h2>
            </div>
        </md-toolbar>

        <md-content layout="row" layout-md="column" layout-align="space-around start" layout-padding class="md-whiteframe-8dp">

            <div class="image" ng-repeat="image in images">
                <a ng-href="/image/{{image.id}}">
                    <img ng-src="/api/image/{{image.id}}" alt="{{image.title}}">
                </a>
                <div class="image-info">
                    <span class="title">{{image.title}}</span>
                    <span class="views">{{image.viewsEmbeded + image.viewsWebsite}} views</span>
                </div>
            </div>

        </md-content>

    </div>

</body>

</html>
